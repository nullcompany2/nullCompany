<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="scheduleMapper">

	<resultMap id="memberResultSet" type="Member">
		<result property="memNo" column="MEM_NO" />
		<result property="id" column="ID" />
		<result property="pwd" column="PWD" />
		<result property="name" column="NAME" />
		<result property="gender" column="GENDER" />
		<result property="birth" column="BIRTH" />
		<result property="phone" column="PHONE" />
		<result property="email" column="EMAIL" />
		<result property="address" column="ADDRESS" />
		<result property="photo" column="PHOTO" />
		<result property="enrollDate" column="ENROLL_DATE" />
		<result property="updateDate" column="UPDATE_DATE" />
		<result property="mStatus" column="M_STATUS" />
		<result property="annualLeave" column="ANNUAL_DATE" />
		<result property="rewardLeave" column="REWARD_DATE" />
		<result property="joinStatus" column="JOIN_STATUS" />
		<result property="myInfo" column="MY_INFO" />
		<result property="deptNo" column="DEPT_NO" />
		<result property="lankNo" column="RANK_NO" />
		<result property="deptName" column="DEPT_NAME" />
		<result property="rankName" column="RANK_NAME" />
		<result property="sAccess" column="S_ACCESS" />
	</resultMap>


	<resultMap id="deptResultSet" type="Department">
		<result property="deptNo" column="DEPT_NO" />
		<result property="deptName" column="DEPT_NAME" />
	</resultMap>

	<resultMap id="CalendarResultSet" type="Calendar">
		<result property="calName" column="CAL_NAME" />
		<result property="color" column="COLOR" />
		<result property="enrollMember" column="ENROLL_MEM" />
		<result property="lookMember" column="LOOK_MEM" />
		<result property="calNo" column="CAL_NO" />
	</resultMap>

	<resultMap id="CalendarMemberResultSet" type="CalendarMember">
		<result property="calMemType" column="CAL_MEM_TYPE" />
		<result property="calMem" column="CAL_MEM" />
		<result property="calNo" column="CAL_NO" />
	</resultMap>


	<!-- 부서 셀렉트 리스트 -->
	<select id="selectdeptList" resultMap="deptResultSet"
		parameterType="Department">
		SELECT *
		FROM DEPARTMENT
		ORDER BY DEPT_NO
	</select>

	<!-- 사원 리스트 -->
	<select id="selectmemList" resultMap="memberResultSet"
		parameterType="Member">
		SELECT *
		FROM MEMBER
	</select>

	<!-- 공유 캘린더 인써트 -->
	<insert id="insertCommunity" parameterType="Calendar">
		INSERT INTO CALENDAR VALUES(1, #{calNo}, #{calName}, #{color})
		<selectKey keyProperty="calNo" resultType="int"
			order="BEFORE">
			select CAL_SEQ.NEXTVAL FROM DUAL
		</selectKey>
	</insert>

	<insert id="EnrollMember" parameterType="CalendarMember">
		INSERT INTO CALENDAR_MEMBER
		VALUES( #{calNo}, #{calMem}, 1)
	</insert>
</mapper>